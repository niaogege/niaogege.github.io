<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible"><meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1,user-scalable=no"><meta name="renderer" content="webkit"><meta name="color-scheme" content="dark light"><meta name="author" content="Niaogege"><meta name="description" content="记录生活 记录点滴"><meta name="keywords" content="record blog my"><title>picgo + custom Domain = my picture bed(搭建自己的图床)</title><link rel="icon" type="image/x-icon" href="/images/favicon.ico"><link rel="stylesheet" href="//at.alicdn.com/t/font_3242539_utq6ykfq7z.css"><link rel="stylesheet" light-src="https://cdn.staticfile.org/highlight.js/11.5.0/styles/default.min.css" dark-src="https://cdn.staticfile.org/highlight.js/11.5.0/styles/tokyo-night-dark.min.css"><link rel="stylesheet" href="https://fonts.font.im/css?family=Noto+Serif" as="font"><link href="/style/index.css" rel="stylesheet"><meta name="generator" content="Hexo 6.3.0"></head><body><header class="page-header"><nav><ul class="router-list"><li class="nav-item"> <a href="/">主页</a></li><li class="nav-item"> <a href="/archives/">归档</a></li><li class="nav-item"> <a href="https://bythewayer.com/learn/">学习</a></li><li class="nav-item"> <a href="https://bythewayer.com/love/">笔记</a></li></ul><div class="mode-switch"><span class="iconfont icon-DarkTheme"></span></div></nav></header><main><section class="main-content"><section class="post-page"><div class="title-bar"><h1>picgo + custom Domain = my picture bed(搭建自己的图床)</h1><div class="post-info"><span>2023-01-04 15:43:16</span><span class="tags"><a href="/tags/%E5%9B%BE%E5%BA%8A-COS-CDN/">#图床 COS CDN</a></span></div></div><div class="feature-img"><img src="https://www.bythewayer.com/img/txcos.webp" alt="feature-img"/></div><article> <div class="content"><p>之前用的第三方云图床，发现很多时候还是加载太慢，所以干脆自己搭建一个图床。<br>本想搭建一个免费的基于 github 的图床，但看到腾讯云 COS 支持图片存储，本着试一试的心态，从头开始搭建自己的图床，最终的效果就是：</p>
<p>访问图片明显快多了：<br><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" 
  class="img-loading" data-original="https://www.bythewayer.com/img/cos_1.webp"" alt="cos_1"></p>
<p>下面简单说说搭建步骤，其中里面会夹杂 COS&#x2F;CDN&#x2F;CNAME 别名解析等专业术语，</p>
<ul>
<li>COS: 对象存储（Cloud Object Storage，COS）是由腾讯云推出的无目录层次结构、无数据格式限制，可容纳海量数据且支持 HTTP&#x2F;HTTPS 协议访问的分布式存储服务</li>
<li>CDN: 内容分发网络（Content Delivery Network，CDN），是在现有 Internet 中增加的一层新的网络架构，由遍布全球的高性能加速节点构成。这些高性能的服务节点都会按照一定的缓存策略存储您的业务内容，当您的用户向您的某一业务内容发起请求时，请求会被调度至最接近用户的服务节点，直接由服务节点快速响应，有效降低用户访问延迟，提升可用性。</li>
<li>CNAME: 将域名指向另一个域名地址，与其保持相同解析，如 <a target="_blank" rel="noopener" href="https://www.dnspod.cn/">https://www.dnspod.cn</a><br>www:常见主机记录，将域名解析为 <a target="_blank" rel="noopener" href="http://www.bythewayer.com/">www.bythewayer.com</a><br>@:直接解析主域名 bythewayer.com<br>mail:将域名解析为 mail.bythewayer.com，通常用于邮件服务<br><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" 
  class="img-loading" data-original="https://www.bythewayer.com/img/cos_6.webp"" alt="CNAME 记录"></li>
</ul>
<h3 id="First-下载-PICGO"><a href="#First-下载-PICGO" class="headerlink" title="First 下载 PICGO"></a>First 下载 PICGO</h3><p>选择适合的自己的版本<a target="_blank" rel="noopener" href="https://github.com/Molunerfinn/PicGo/releases/tag/v2.3.1">PicGo</a>安装即可</p>
<h3 id="Second-购买-COS-服务，新人有足够的优化"><a href="#Second-购买-COS-服务，新人有足够的优化" class="headerlink" title="Second 购买 COS 服务，新人有足够的优化"></a>Second 购买 COS 服务，新人有足够的优化</h3><p><a target="_blank" rel="noopener" href="https://console.cloud.tencent.com/cos">COS</a>,能打开之后，开始创建自己的存储桶,创建完之后：<br><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" 
  class="img-loading" data-original="https://www.bythewayer.com/img/cos_2.webp"" alt="cos_2"></p>
<h3 id="Third-PicGo-配置"><a href="#Third-PicGo-配置" class="headerlink" title="Third PicGo 配置"></a>Third PicGo 配置</h3><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" 
  class="img-loading" data-original="https://www.bythewayer.com/img/cos_3.webp"" alt="PicGo 配置"></p>
<p>总共需要配置的有：<br>1.secretId&#x2F;secretKey&#x2F;Appid 这三个参数值在: <a target="_blank" rel="noopener" href="https://console.cloud.tencent.com/cam/capi">API 密钥管理</a><br><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" 
  class="img-loading" data-original="https://www.bythewayer.com/img/cos_4.webp"" alt="密钥管理"><br>2.Bucket 值是：存储桶名称</p>
<p>3.存储区域： ap-nanjing(以存储桶那里的信息为准，我这边填的是南京)</p>
<p>4.设置自定义域名： <a target="_blank" rel="noopener" href="https://www.bythewayer.com,这个域名是我配置了自定义/">https://www.bythewayer.com，这个域名是我配置了自定义</a> CDN 加速域名，这样的好处就是后面上传的图片路径就是 自定义域名+路径+图片名称</p>
<p>配置完成之后就能上传图片，上传到的图片能在 COS 文件列表看到</p>
<h3 id="关于配置-CDN-加速域名"><a href="#关于配置-CDN-加速域名" class="headerlink" title="关于配置 CDN 加速域名"></a>关于配置 CDN 加速域名</h3><p>域名需要提前备案好，否则不支持 CDN 加速，源站类型我这里原则的事静态网站源站，这个静态网站源站也是在当前存储桶里设置的，文件也就是放在存储桶下的跟路径里<br><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" 
  class="img-loading" data-original="https://www.bythewayer.com/img/cos_5.webp"" alt="静态网站源站文件"></p>
<blockquote>
<p>有一个问题就是如何自动传输代码文件，不可能每次都需要手动更改</p>
</blockquote>
<p>启用 CDN 域名加速之后，如何验证？</p>
<p>如果网站没有开启 CDN，不同地区 Ping 网址是网站服务器的真实地址，如果开启了 CDN 加速，网站内容会缓存到各地区离你最近的服务器，所以访问 IP 会发生变化，根据这个原理，就很容易判断网站是否开启了 CDN 了。<br>推荐网站测试工具二：<a target="_blank" rel="noopener" href="https://ping.chinaz.com/bythewayer.com">站长工具 Ping</a></p>
</div></article><div class="copyright-wrapper"><p>原文作者:<a href="https://bythewayer.com">Niaogege</a></p><p>原文链接:<a href="https://bythewayer.com/2023/01/04/picgo-custom-Domain-my-picture-bed/">picgo + custom Domain = my picture bed(搭建自己的图床)</a></p><p>发表日期: 2023-01-04 15:43:16</p><p>更新日期: 2023-04-24 18:18:19</p><p>版权声明: 本文采用<a rel="license noopener" target="_blank" href="http://creativecommons.org/licenses/by-nc/4.0/">知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可</p></div><div class="post-pager"><div class="prev"><a href="/2023/02/13/vitepress%20blog%20Algolia%20/" title="vitepress博客使用Algolia进行全局搜索">上一篇 vitepress博客使用Algolia进行全局搜索</a></div><div class="next"> <a href="/2023/01/03/Where-is-the-personal-value-of-front-end-engineers-%E8%BD%AC%E8%BD%BD/" title="Where is the personal value of front-end engineers(转载)">下一篇 Where is the personal value of front-end engineers(转载)</a></div></div><link rel="stylesheet" href="https://cdn.staticfile.org/gitalk/1.7.2/gitalk.min.css"/><script src="https://cdn.staticfile.org/gitalk/1.7.2/gitalk.min.js"></script><div id="gitalk-container"></div><script>new Gitalk({
  clientID: '14358f21bfa09660100b',
  clientSecret: '96f34217eea90602cb5b142eb89508898354754c',
  repo: 'blog-comment',
  owner: 'niaogege',
  admin: 'niaogege',
  id: location.pathname.substr(0, 48),
  distractionFreeMode: true,
  labels: ['Gitalk'],
  title: 'picgo + custom Domain = my picture bed(搭建自己的图床)',
}).render('gitalk-container');</script></section></section></main><footer class="footer-page"><div><span>Powered by</span><a target="_blank" rel="noopener" href="https://beian.miit.gov.cn/">苏ICP备2021048304号-1</a><span>| Theme</span><a target="_blank" rel="noopener" href="https://github.com/techmovie/hexo-theme-instapaper">instapaper</a><span>| Hexo </span><a target="_blank" rel="noopener" href="https://hexo.io/"></a></div></footer><script src="/scripts/dark.js"></script><script src="/scripts/post.js"></script></body></html>